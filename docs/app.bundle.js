(()=>{var t,e,i={},n={};function s(t){if(n[t])return n[t].exports;var e=n[t]={id:t,loaded:!1,exports:{}};return i[t].call(e.exports,e,e.exports,s),e.loaded=!0,e.exports}s.m=i,s.amdD=function(){throw new Error("define cannot be used indirect")},s.amdO={},s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.f={},s.e=t=>Promise.all(Object.keys(s.f).reduce(((e,i)=>(s.f[i](t,e),e)),[])),s.u=t=>t+".bundle.js",s.miniCssF=t=>(143===t?"app":t)+".css",s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},e="highlaight:",s.l=(i,n,o)=>{if(t[i])t[i].push(n);else{var a,r;if(void 0!==o)for(var h=document.getElementsByTagName("script"),d=0;d<h.length;d++){var l=h[d];if(l.getAttribute("src")==i||l.getAttribute("data-webpack")==e+o){a=l;break}}a||(r=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,s.nc&&a.setAttribute("nonce",s.nc),a.setAttribute("data-webpack",e+o),a.src=i),t[i]=[n];var c=(e,n)=>{a.onerror=a.onload=null,clearTimeout(u);var s=t[i];if(delete t[i],a.parentNode&&a.parentNode.removeChild(a),s&&s.forEach((t=>t(n))),e)return e(n)},u=setTimeout(c.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=c.bind(null,a.onerror),a.onload=c.bind(null,a.onload),r&&document.head.appendChild(a)}},s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),s.p="",(()=>{var t={143:0};s.f.j=(e,i)=>{var n=s.o(t,e)?t[e]:void 0;if(0!==n)if(n)i.push(n[2]);else{var o=new Promise(((i,s)=>{n=t[e]=[i,s]}));i.push(n[2]=o);var a=s.p+s.u(e),r=new Error;s.l(a,(i=>{if(s.o(t,e)&&(0!==(n=t[e])&&(t[e]=void 0),n)){var o=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;r.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",r.name="ChunkLoadError",r.type=o,r.request=a,n[1](r)}}),"chunk-"+e)}};var e=self.webpackChunkhighlaight=self.webpackChunkhighlaight||[],i=e.push.bind(e);e.push=e=>{for(var n,o,[a,r,h]=e,d=0,l=[];d<a.length;d++)o=a[d],s.o(t,o)&&t[o]&&l.push(t[o][0]),t[o]=0;for(n in r)s.o(r,n)&&(s.m[n]=r[n]);for(h&&h(s),i(e);l.length;)l.shift()()}})();const o=Promise.all([s.e(136),s.e(289),s.e(831)]).then(s.bind(s,1289)),a=Promise.all([s.e(136),s.e(908),s.e(436)]).then(s.bind(s,3908)),r=Promise.all([s.e(136),s.e(537)]).then(s.bind(s,3136)),h=document.getElementById("video"),d=document.getElementById("output"),l=document.getElementById("cursor");document.getElementsByClassName("heavy");let c=0,u=0;const g=(t,e,i,n,s)=>n+(t=(t-e)/(i-e))*(s-n),m=new class{constructor(t,e){this.WINDOW_WIDTH=window.innerWidth,this.WINDOW_HEIGHT=window.innerHeight,this.TF_BACKEND="webgl",this.input=t,this.output=e,this.videoWidth=void 0,this.videoHeight=void 0,this.model=void 0,this.ctx=void 0}async init(){await a,await(await r).setBackend(this.TF_BACKEND),await this.setupCamera(),this.input.play(),this.input.width=this.WINDOW_WIDTH,this.input.height=this.WINDOW_HEIGHT,this.output.width=this.WINDOW_WIDTH,this.output.height=this.WINDOW_HEIGHT,this.ctx=this.output.getContext("2d"),this.ctx.translate(this.output.width,0),this.ctx.scale(-1,1),this.model=await(await o).load(),this.renderPrediction()}async setupCamera(){const t=await navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user",width:this.WINDOW_WIDTH,height:this.WINDOW_HEIGHT}});let{width:e,height:i}=t.getTracks()[0].getSettings();return this.videoWidth=e,this.videoHeight=i,this.input.srcObject=t,new Promise((t=>{this.input.onloadedmetadata=()=>{t(this.input)}}))}async renderPrediction(){const t=await this.model.estimateHands(this.input);if(t.length>0){const e=t[0];if(!e.annotations&&!e.annotations.indexFinger&&!e.annotations.indexFinger.length)return!1;const i=e.annotations.indexFinger[3];i[0]=g(i[0],this.WINDOW_WIDTH-this.videoWidth,this.videoWidth,0,this.WINDOW_WIDTH),i[1]=g(i[1],0,this.videoHeight,0,this.WINDOW_HEIGHT);let n=[this.WINDOW_WIDTH-i[0]+(this.videoWidth-this.WINDOW_WIDTH),i[1]],s=n[0]-c,o=n[1]-u;c+=s/2,u+=o/2,l.style.transform=`translate(${c}px, ${u}px)`,p([c,u])}requestAnimationFrame((()=>this.renderPrediction()))}}(h,d),p=t=>{const e=document.elementFromPoint(t[0],t[1]);if(!e)return!1;if(e.classList.contains("highlighted"))return!1;if(e.classList.contains("wide")||e.classList.contains("heavy")||e.classList.contains("italic")){const t=document.getElementsByClassName("highlighted");for(const i of t)i.isEqualNode(e)||i.classList.remove("highlighted");e.classList.add("highlighted")}else{const t=document.getElementsByClassName("highlighted");for(const e of t)e.classList.remove("highlighted")}};m.init()})();